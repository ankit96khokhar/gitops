# ------------------------------
# ğŸŒ Global Settings
# ------------------------------
global:
  imagePullSecrets: []

# ------------------------------
# ğŸ“Š Grafana Configuration
# ------------------------------
grafana:
  enabled: true
  adminPassword: admin
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      kubernetes.io/ingress.class: nginx
    hosts:
      - grafana.local
    path: /
  nodeSelector:
    kubernetes.io/arch: arm64
    kubernetes.io/os: linux

# ------------------------------
# ğŸš€ Prometheus Configuration
# ------------------------------
prometheus:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      kubernetes.io/ingress.class: nginx
    hosts:
      - prometheus.local
    paths:
      - /
  prometheusSpec:
    retention: 6h
    storageSpec: {}
    # Ensure it schedules on your ARM nodes
    nodeSelector:
      kubernetes.io/arch: arm64
      kubernetes.io/os: linux
    resources:
      requests:
        cpu: 200m
        memory: 512Mi
      limits:
        cpu: 500m
        memory: 1Gi

# ------------------------------
# ğŸ”§ Prometheus Operator
# ------------------------------
prometheusOperator:
  namespaces:
    releaseNamespace: false
  nodeSelector:
    kubernetes.io/arch: arm64
    kubernetes.io/os: linux
  # Allows operator to run on the control-plane node
  tolerations:
    - key: "node-role.kubernetes.io/control-plane"
      operator: "Exists"
      effect: "NoSchedule"

# ------------------------------
# ğŸ› ï¸ Node Exporter (The Port 9100 Fix)
# ------------------------------
prometheusNodeExporter:
  enabled: true
  hostNetwork: false   # Prevents conflict with host port 9100
  hostPort: false      # Ensures it doesn't try to bind to the node's IP
  service:
    port: 9100
    targetPort: 9100
  extraArgs:
    - --web.listen-address=:9100
  nodeSelector:
    kubernetes.io/arch: arm64
    kubernetes.io/os: linux

# ------------------------------
# ğŸš« Disabled Components
# ------------------------------
alertmanager:
  enabled: false

kubeEtcd:
  enabled: false

kubeControllerManager:
  enabled: false

kubeScheduler:
  enabled: false

kubeProxy:
  enabled: false

defaultRules:
  create: true